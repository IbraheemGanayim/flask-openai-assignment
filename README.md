# ğŸ¯ **Flask OpenAI Assignment** ğŸš€

Welcome to the **Flask OpenAI Assignment** repository! This project demonstrates a containerized Flask application that interacts with a PostgreSQL database, powered by **Docker**. It includes a simple question-answering API, database integration using **SQLAlchemy** and automated database migrations via **Alembic**. Unit tests are also implemented to ensure the robustness of the `/ask` API endpoint. ğŸ’ª

---

## ğŸ”¥ **Key Features** ğŸ”¥
- ğŸŒ **REST API**: A `/ask` endpoint that processes questions and responds with real answers powered by OpenAIâ€™s API.
- ğŸ³ **Fully Dockerized**: The entire stack (Flask app and PostgreSQL) runs inside Docker containers.
- ğŸ—ƒï¸ **Database Integration**: PostgreSQL database with SQLAlchemy ORM for handling queries and persistence.
- ğŸš€ **Alembic Migrations**: Schema migrations handled effortlessly with Alembic.
- ğŸ§ª **Unit Tests**: Unit tests for the `/ask` API, ensuring code reliability.
- ğŸ“ˆ **Scalable and Secure**: Easily scalable via Docker and secure with environment variable management.

---

## âš™ï¸ **Tech Stack** ğŸ› ï¸
- **Flask**: Web framework for Python
- **PostgreSQL**: Relational database management system
- **SQLAlchemy**: ORM for handling database operations
- **Alembic**: Database migration tool
- **Docker**: Containerization for application and database
- **Pytest**: Testing framework for unit tests

---

## ğŸ“‚ **Project Structure**
Hereâ€™s an overview of the projectâ€™s main files and directories:

```plaintext
ğŸ“¦ flask-openai-assignment
â”œâ”€â”€ ğŸ“‚ migrations            # Alembic migration files for database
â”œâ”€â”€ ğŸ“„ Dockerfile            # Docker configuration for the Flask app
â”œâ”€â”€ ğŸ“„ docker-compose.yml    # Docker Compose configuration to orchestrate containers
â”œâ”€â”€ ğŸ“„ requirements.txt      # Python dependencies
â”œâ”€â”€ ğŸ“„ app.py                # Main Flask application file
â”œâ”€â”€ ğŸ“„ models.py             # Database models for SQLAlchemy
â”œâ”€â”€ ğŸ“„ app_test.py           # Unit tests for the app
â””â”€â”€ ğŸ“„ README.md             # Project documentation
```

---

## ğŸš€ **Getting Started** ğŸ› ï¸

To get this project up and running on your local machine, follow the instructions below:

### **1. Clone the Repository**
```bash
git clone https://github.com/IbraheemGanayim/flask-openai-assignment.git
cd flask-openai-assignment
```

### **2. Set Up the Environment Variables**
- Create a `.env` file in the root directory and add the following:
  ```plaintext
  OPENAI_API_KEY=your_openai_api_key_here
  ```

### **3. Build and Run the Docker Containers**
Ensure that Docker is installed and running on your machine, then run:
```bash
docker-compose up --build
```
This command will:
- Build the Flask application container.
- Spin up the PostgreSQL database container.
- Automatically apply any database migrations using Alembic.

### **4. Access the Application**
- Once everything is up and running, the API will be accessible at:
  - **Flask App**: [http://localhost:5000](http://localhost:5000)
  
  Test the `/ask` endpoint by sending a **POST** request:
  ```bash
  curl -X POST http://localhost:5000/ask -H "Content-Type: application/json" -d '{"question": "What is AI?"}'
  ```

---

## ğŸ§ª **Running Tests** ğŸ§ª

To ensure everything works as expected, you can run unit tests inside the Flask container.

1. **Enter the Flask container**:
   ```bash
   docker exec -it insait-flask-app /bin/sh
   ```

2. **Run the tests**:
   ```bash
   pytest app_test.py
   ```

---

## ğŸ”„ **Database Migrations**

Alembic is used to handle database migrations. You can generate and apply new migrations with the following commands:

1. **Create a new migration**:
   ```bash
   alembic revision --autogenerate -m "your migration message"
   ```

2. **Apply the migration**:
   ```bash
   alembic upgrade head
   ```

---

## ğŸ“Š **Project Workflow** ğŸ“Š

This project follows a logical development workflow:
1. **Flask App Creation**: Basic Flask app setup with `/ask` endpoint.
2. **Docker Integration**: Dockerized the application for easy deployment and testing.
3. **PostgreSQL Integration**: Set up the PostgreSQL database with SQLAlchemy.
4. **Alembic Migrations**: Handled schema changes via Alembic migrations.
5. **Unit Testing**: Added unit tests for the API functionality to ensure correctness.
6. **Dockerized Testing**: Configured Docker to support running unit tests inside containers.

---

## ğŸ› ï¸ **API Endpoints**

- **POST** `/ask`
  - **Description**: Submit a question and receive a real answer generated by OpenAI's GPT model.
  - **Request**:
    ```json
    {
      "question": "What is AI?"
    }
    ```
  - **Response**:
    ```json
    {
      "question": "What is AI?",
      "answer": "AI stands for Artificial Intelligence, which refers to..."
    }
    ```

---

## ğŸ” **Future Improvements**
- ğŸ”’ **Authentication**: Add JWT-based authentication for API access.
- ğŸŒ **Frontend Interface**: Develop a simple UI using React or another frontend framework to interact with the API.

---

### ğŸ‰ **Thank You for Checking Out the Project!** ğŸ‰
Feel free to reach out if you have any questions! ğŸ˜Š

---

### ğŸ–¥ï¸ **Contact**
- **GitHub**: [Ibraheem Ganayim](https://github.com/IbraheemGanayim)
- **Email**: Ganayim.Ibraheem@gmail.com
